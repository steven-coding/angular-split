{"version":3,"file":"splitArea.directive.js","sourceRoot":"","sources":["splitArea.directive.ts"],"names":[],"mappings":"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","sourcesContent":["import { Directive, Input, ElementRef, Renderer2, OnInit, OnDestroy, NgZone } from '@angular/core';\r\n\r\nimport { SplitComponent } from './split.component';\r\n\r\n@Directive({\r\n    selector: 'split-area'\r\n})\r\nexport class SplitAreaDirective implements OnInit, OnDestroy {\r\n\r\n    private _order: number | null = null;\r\n\r\n    @Input() set order(v: number | null) {\r\n        v = Number(v);\r\n        this._order = !isNaN(v) ? v : null;\r\n\r\n        this.split.updateArea(this, true, false);\r\n    }\r\n    \r\n    get order(): number | null {\r\n        return this._order;\r\n    }\r\n\r\n    ////\r\n\r\n    private _size: number | null = null;\r\n\r\n    @Input() set size(v: number | null) {\r\n        v = Number(v);\r\n        this._size = (!isNaN(v) && v >= 0 && v <= 100) ? (v/100) : null;\r\n\r\n        this.split.updateArea(this, false, true);\r\n    }\r\n    \r\n    get size(): number | null {\r\n        return this._size;\r\n    }\r\n\r\n    ////\r\n\r\n    private _minSize: number = 0;\r\n\r\n    @Input() set minSize(v: number) {\r\n        v = Number(v);\r\n        this._minSize = (!isNaN(v) && v > 0 && v < 100) ? v/100 : 0;\r\n\r\n        this.split.updateArea(this, false, true);\r\n    }\r\n    \r\n    get minSize(): number {\r\n        return this._minSize;\r\n    }\r\n\r\n\r\n    /**\r\n     * minimum size (in pixels) of the splitArea\r\n     */\r\n    private _minSizePx: number;\r\n\r\n    /**\r\n     * minimum size (in pixels) of the splitArea\r\n     */\r\n    @Input() set minSizePx(v: number) {\r\n        console.log(\"set minWidthPx\", v);\r\n        this._minSizePx = v;\r\n\r\n        this.split.updateArea(this, false, true);\r\n    }\r\n\r\n    get minSizePx(): number {\r\n        return this._minSizePx;\r\n    }\r\n\r\n    ////\r\n\r\n    private _visible: boolean = true;\r\n\r\n    @Input() set visible(v: boolean) {\r\n        v = (typeof(v) === 'boolean') ? v : (v === 'false' ? false : true);\r\n        this._visible = v;\r\n\r\n        if(this.visible) { \r\n            this.split.showArea(this);\r\n        }\r\n        else {\r\n            this.split.hideArea(this);\r\n        }\r\n    }\r\n\r\n    get visible(): boolean {\r\n        return this._visible;\r\n    }\r\n\r\n    ////\r\n\r\n    private transitionListener: Function;\r\n    private readonly lockListeners: Array<Function> = [];\r\n\r\n    constructor(private ngZone: NgZone,\r\n                private elRef: ElementRef,\r\n                private renderer: Renderer2,\r\n                private split: SplitComponent) {}\r\n\r\n    public ngOnInit(): void {\r\n        this.split.addArea(this);\r\n\r\n        this.renderer.setStyle(this.elRef.nativeElement, 'flex-grow', '0');\r\n        this.renderer.setStyle(this.elRef.nativeElement, 'flex-shrink', '0');\r\n\r\n        this.ngZone.runOutsideAngular(() => {\r\n            this.transitionListener = this.renderer.listen(this.elRef.nativeElement, 'transitionend', (e: TransitionEvent) => this.onTransitionEnd(e));\r\n        });\r\n    }\r\n\r\n    public getSizePixel(prop: 'offsetWidth' | 'offsetHeight'): number {\r\n        return this.elRef.nativeElement[prop];\r\n    }\r\n\r\n    public setStyleVisibleAndDir(isVisible: boolean, isDragging: boolean, direction: 'horizontal' | 'vertical'): void {\r\n        if(isVisible === false) {\r\n            this.setStyleFlexbasis('0', isDragging);\r\n            this.renderer.setStyle(this.elRef.nativeElement, 'overflow-x', 'hidden');\r\n            this.renderer.setStyle(this.elRef.nativeElement, 'overflow-y', 'hidden');\r\n            \r\n            if(direction === 'vertical') {\r\n                this.renderer.setStyle(this.elRef.nativeElement, 'max-width', '0');\r\n            }\r\n        }\r\n        else {\r\n            this.renderer.setStyle(this.elRef.nativeElement, 'overflow-x', 'hidden');\r\n            this.renderer.setStyle(this.elRef.nativeElement, 'overflow-y', 'auto');\r\n            this.renderer.removeStyle(this.elRef.nativeElement, 'max-width');\r\n        }\r\n\r\n        if(direction === 'horizontal') {\r\n            this.renderer.setStyle(this.elRef.nativeElement, 'height', '100%');\r\n            this.renderer.removeStyle(this.elRef.nativeElement, 'width');\r\n        }\r\n        else {\r\n            this.renderer.setStyle(this.elRef.nativeElement, 'width', '100%');\r\n            this.renderer.removeStyle(this.elRef.nativeElement, 'height');\r\n        }\r\n    }\r\n\r\n    public setStyleOrder(value: number): void {\r\n        this.renderer.setStyle(this.elRef.nativeElement, 'order', value);\r\n    }\r\n    \r\n    public setStyleFlexbasis(value: string, isDragging: boolean, direction: 'horizontal' | 'vertical'): void {\r\n        // If component not yet initialized or gutter being dragged, disable transition\r\n        if(this.split.isViewInitialized === false || isDragging === true) {\r\n            this.setStyleTransition(false);\r\n        }\r\n        // Or use 'useTransition' to know if transition.\r\n        else {\r\n            this.setStyleTransition(this.split.useTransition);\r\n        }\r\n\r\n        if (direction === 'horizontal') {\r\n            this.renderer.removeStyle(this.elRef.nativeElement, \"width\");\r\n        } else {\r\n            this.renderer.removeStyle(this.elRef.nativeElement, \"height\");\r\n        }\r\n\r\n        this.renderer.setStyle(this.elRef.nativeElement, 'flex-basis', value);\r\n    }\r\n\r\n    public setSizePx(value: number, direction: 'horizontal' | 'vertical') {\r\n        this.renderer.removeStyle(this.elRef.nativeElement, 'flex-basis');\r\n        if (direction === 'horizontal') {\r\n            this.renderer.setStyle(this.elRef.nativeElement, \"width\", `${value}px`);\r\n        } else {\r\n            this.renderer.setStyle(this.elRef.nativeElement, \"height\", `${value}px`);\r\n        }\r\n            \r\n    }\r\n    \r\n    private setStyleTransition(useTransition: boolean): void {\r\n        if(useTransition) {\r\n            this.renderer.setStyle(this.elRef.nativeElement, 'transition', `flex-basis 0.3s`);\r\n        }\r\n        else {\r\n            this.renderer.removeStyle(this.elRef.nativeElement, 'transition');\r\n        }\r\n    }\r\n    \r\n    private onTransitionEnd(event: TransitionEvent): void {\r\n        // Limit only flex-basis transition to trigger the event\r\n        if(event.propertyName === 'flex-basis') {\r\n            this.split.notify('transitionEnd');\r\n        }\r\n    }\r\n    \r\n    public lockEvents(): void {\r\n        this.ngZone.runOutsideAngular(() => {\r\n            this.lockListeners.push( this.renderer.listen(this.elRef.nativeElement, 'selectstart', (e: Event) => false) );\r\n            this.lockListeners.push( this.renderer.listen(this.elRef.nativeElement, 'dragstart', (e: Event) => false) );\r\n        });\r\n    }\r\n\r\n    public unlockEvents(): void {\r\n        while(this.lockListeners.length > 0) {\r\n            const fct = this.lockListeners.pop();\r\n            if(fct) {\r\n                fct();\r\n            }\r\n        }\r\n    }\r\n\r\n    public ngOnDestroy(): void {\r\n        this.unlockEvents();\r\n\r\n        if(this.transitionListener) {\r\n            this.transitionListener();\r\n        }\r\n\r\n        this.split.removeArea(this);\r\n    }\r\n}\r\n"]}